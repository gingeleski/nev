<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Nev</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="css/style.css">
    <script src="script/nevbot.js"></script>
    <script src="script/nevdata.js"></script>
    <script src="script/nev.js"></script>
</head>
<body onload="window.setTimeout('nevReset()',100)">
    <h1 class="center" id="headline">Nev</h1>

    <center>
    <table border="0" cellspacing="10" cellpadding="0">
    <form name="e_form" onsubmit="nevStep();return false">
        <textarea name="e_display" cols="60" rows="20"></textarea><br>
    	<input type="text" name="e_input" size="50"><br>
    	<input id="start_talk" type="submit" value="&nbsp;Start Speech&nbsp;" onclick="start()">
        <input id="stop_talk" type="submit" value="&nbsp;Stop Speech&nbsp;" onclick="stop()">
        <input id="send" type="submit" value"&nbsp;Send&nbsp;">
    </form>
    </table>
    </center>

    <script>
        var final_transcript = '';
        var f = document.forms.e_form;

        var recognition = new webkitSpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;

        function start() {
            final_transcript = '';
            recognition.start();
        }

        function stop() {
            recognition.stop();
        }

        recognition.onresult = function(event) {
            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    final_transcript += event.results[i][0].transcript;
                }

                f.e_input.value = final_transcript;
            }
        };

    </script>
</body>
